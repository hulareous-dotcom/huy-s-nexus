<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Sleepless Guardian | AI Banking</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;800&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        deepNavy: '#020c1b',
                        electricBlue: '#00f3ff',
                        cyberPurple: '#bc13fe',
                        glass: 'rgba(255, 255, 255, 0.05)',
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        display: ['Montserrat', 'sans-serif'],
                        game: ['"Press Start 2P"', 'cursive'],
                    },
                    animation: {
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'float': 'float 6s ease-in-out infinite',
                        'pop-in': 'popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards',
                        'glitch': 'glitch 1s linear infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-20px)' },
                        },
                        popIn: {
                            '0%': { opacity: '0', transform: 'scale(0.8)' },
                            '100%': { opacity: '1', transform: 'scale(1)' },
                        },
                        glitch: {
                            '2%, 64%': { transform: 'translate(2px,0) skew(0deg)' },
                            '4%, 60%': { transform: 'translate(-2px,0) skew(0deg)' },
                            '62%': { transform: 'translate(0,0) skew(5deg)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #020c1b;
            color: #e6f1ff;
            overflow-x: hidden;
            cursor: none;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #020c1b; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #00f3ff; }

        /* Custom Cursor */
        .cursor-dot, .cursor-outline {
            position: fixed; top: 0; left: 0;
            transform: translate(-50%, -50%);
            border-radius: 50%; z-index: 9999; pointer-events: none;
        }
        .cursor-dot { width: 8px; height: 8px; background-color: #00f3ff; }
        .cursor-outline {
            width: 40px; height: 40px;
            border: 1px solid rgba(0, 243, 255, 0.5);
            transition: width 0.2s, height 0.2s, background-color 0.2s;
        }
        body:hover .cursor-outline { background: radial-gradient(circle, rgba(0,243,255,0.1) 0%, rgba(0,0,0,0) 70%); }

        /* Utilities */
        .text-gradient {
            background: linear-gradient(90deg, #00f3ff, #bc13fe);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }
        .glass-panel {
            background: rgba(17, 34, 64, 0.6);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        #canvas-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; opacity: 0.8; }
        .reveal { opacity: 0; transform: translateY(50px); transition: all 1s ease-out; }
        .reveal.active { opacity: 1; transform: translateY(0); }

        /* --- PHONE STYLES --- */
        .phone-mockup {
            border: 12px solid #1a1a1a;
            border-radius: 3.5rem;
            box-shadow: 0 0 60px rgba(0, 243, 255, 0.2), inset 0 0 20px rgba(0,0,0,0.8);
            background: #000;
            position: relative;
            overflow: hidden;
            z-index: 100; /* Standard z-index */
            width: 350px;
            height: 720px;
            transform-origin: center center;
            /* Initial state explicit */
            transform: translate(0, 0) rotate(0deg) scale(1);
        }
        
        /* FINALE CLASSES */
        .finale-mode-setup {
            position: fixed !important;
            z-index: 99999 !important;
            margin: 0 !important;
            /* Faster rotation to ensure it hits 90deg visibly */
            transition: all 1.2s cubic-bezier(0.4, 0, 0.2, 1) !important; 
        }

        .finale-mode-center {
            top: 50% !important;
            left: 50% !important;
            /* Exactly -90deg */
            transform: translate(-50%, -50%) rotate(-90deg) !important;
        }

        .finale-mode-expand {
            /* Keep -90deg and scale up */
            transform: translate(-50%, -50%) rotate(-90deg) scale(20) !important;
            border-color: #000 !important;
            /* Expansion takes 2s */
            transition: transform 2s ease-in, border-color 0.5s !important;
        }

        .finale-fade-out {
            opacity: 0 !important;
            transition: opacity 0.8s ease-out !important;
        }

        .phone-screen {
            height: 100%; width: 100%;
            background: linear-gradient(135deg, #051125 0%, #020c1b 100%);
            position: relative; overflow: hidden; display: flex; flex-direction: column;
            transition: opacity 0.5s;
        }
        .dynamic-island {
            position: absolute; top: 12px; left: 50%; transform: translateX(-50%);
            width: 100px; height: 28px; background: #000; border-radius: 20px; z-index: 60;
            pointer-events: none; transition: opacity 0.5s;
        }
        .status-bar {
            position: absolute; top: 0; width: 100%; height: 44px; z-index: 55;
            display: flex; justify-content: space-between; padding: 0 24px; align-items: center;
            font-size: 12px; font-weight: bold; color: white; pointer-events: none; transition: opacity 0.5s;
        }

        /* App Icons */
        .app-icon {
            width: 60px; height: 60px; border-radius: 16px;
            display: flex; align-items: center; justify-content: center;
            font-size: 26px; color: white; cursor: pointer;
            transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 4px 10px rgba(0,0,0,0.5);
            position: relative; z-index: 50;
        }
        .app-icon:hover { transform: scale(1.1); z-index: 60; }
        .app-icon:active { transform: scale(0.95); }
        .app-label {
            font-size: 10px; margin-top: 6px; text-align: center; color: white;
            font-weight: 500; text-shadow: 0 1px 2px rgba(0,0,0,0.8);
            position: relative; z-index: 40; pointer-events: none;
            height: 12px;
        }

        /* App View - FIXED */
        .app-view {
            position: absolute; 
            top: 0; left: 0; width: 100%; height: 100%; 
            background: #000; 
            z-index: 200; 
            display: flex; flex-direction: column; 
            transform: scale(0.9); opacity: 0;
            visibility: hidden; 
            pointer-events: none; 
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            overflow: hidden;
            padding-top: 50px; 
        }
        .app-view.active { 
            transform: scale(1); opacity: 1; 
            visibility: visible;
            pointer-events: auto; 
        }

        /* Back Button */
        .back-btn-container { position: absolute; bottom: 30px; left: 20px; z-index: 210; }
        .back-btn {
            background: rgba(20, 20, 20, 0.6); backdrop-filter: blur(10px);
            padding: 10px 20px; border-radius: 30px; 
            color: white; font-size: 14px; font-weight: bold;
            display: flex; align-items: center; gap: 8px;
            transition: all 0.2s; border: 1px solid rgba(255,255,255,0.1);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            cursor: pointer;
        }
        .back-btn:hover { background: rgba(255, 255, 255, 0.2); transform: translateY(-2px); }

        /* Home Indicator */
        .home-indicator-area {
            position: absolute; bottom: 0; left: 0; width: 100%; height: 20px;
            z-index: 300; cursor: pointer; display: flex; justify-content: center; align-items: flex-end;
            padding-bottom: 6px; transition: opacity 0.5s;
        }
        .home-indicator {
            width: 130px; height: 5px; background: rgba(255,255,255,0.5);
            border-radius: 10px; pointer-events: auto;
        }

        /* Dock */
        .dock-container {
            position: absolute; bottom: 30px; left: 16px; right: 16px; padding: 16px;
            background: rgba(255, 255, 255, 0.15); backdrop-filter: blur(20px);
            border-radius: 35px; display: flex; justify-content: space-around;
            border: 1px solid rgba(255, 255, 255, 0.1); z-index: 40;
        }

        .slide-heading { font-family: 'Montserrat', sans-serif; font-weight: 800; letter-spacing: -0.02em; }
        .slide-content { font-family: 'Inter', sans-serif; font-weight: 300; line-height: 1.6; }

        /* --- GRAND FINALE OVERLAY --- */
        #grand-finale-overlay {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            background: transparent; /* Initially transparent */
            z-index: 200000; /* FIXED: Higher than phone (99999) to be visible */
            display: flex; align-items: center; justify-content: center;
            opacity: 0; visibility: hidden; transition: opacity 1s ease-in;
            pointer-events: none;
        }
        #grand-finale-overlay.show { opacity: 1; visibility: visible; pointer-events: auto; }
        #finale-canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
        
        .finale-text {
            font-family: 'Montserrat', sans-serif; font-weight: 900;
            font-size: 4rem; color: white; text-align: center;
            z-index: 200001; text-transform: uppercase;
            text-shadow: 0 0 20px rgba(0, 243, 255, 0.8);
            opacity: 0; transform: scale(0.5);
            transition: all 1s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .finale-text.show { opacity: 1; transform: scale(1); }
        .replay-btn {
            position: absolute; bottom: 40px; right: 40px;
            color: rgba(255,255,255,0.3); font-size: 14px;
            cursor: pointer; z-index: 200002;
            transition: color 0.3s;
        }
        .replay-btn:hover { color: white; }

        /* Place holder for spacing when phone leaves */
        #phone-placeholder {
            width: 350px; height: 720px; display: none;
        }

    </style>
</head>
<body class="font-sans antialiased selection:bg-electricBlue selection:text-deepNavy">

    <!-- Custom Cursor -->
    <div class="cursor-dot" id="cursor-dot"></div>
    <div class="cursor-outline" id="cursor-outline"></div>

    <!-- 3D Background -->
    <div id="canvas-container"></div>

    <!-- Navigation -->
    <nav class="fixed top-0 w-full z-[999] px-6 py-4 flex justify-between items-center glass-panel border-none bg-opacity-90 backdrop-blur-md">
        <div class="text-2xl font-display font-bold tracking-tighter text-white">
            SLEEPLESS<span class="text-electricBlue">GUARDIAN</span>
        </div>
        <button class="px-6 py-2 border border-electricBlue text-electricBlue rounded-full hover:bg-electricBlue hover:text-deepNavy transition-all duration-300 text-sm font-bold uppercase tracking-widest">
            Demo
        </button>
    </nav>

    <!-- Grand Finale Overlay -->
    <div id="grand-finale-overlay">
        <canvas id="finale-canvas"></canvas>
        <div class="flex flex-col items-center">
            <h1 id="finale-text" class="finale-text">CẢM ƠN ĐÃ<br><span class="text-electricBlue">LẮNG NGHE !!</span></h1>
        </div>
        <div class="replay-btn" onclick="resetFinale()"><i class="fa-solid fa-rotate-left"></i> Replay</div>
    </div>

    <!-- Section 1: Hero -->
    <section id="hero" class="relative min-h-screen flex flex-col md:flex-row items-center justify-center pt-40 pb-20 gap-20 px-6 overflow-hidden">
        
        <!-- TEXT CONTENT -->
        <div class="z-20 text-center md:text-left max-w-lg order-2 md:order-1 animate-pop-in">
            <h1 class="text-4xl md:text-6xl font-display font-bold mb-6 tracking-tight leading-tight">
                Ngân hàng <br>
                <span class="text-gradient animate-pulse-slow">Không Bao Giờ Ngủ</span>
            </h1>
            <p class="text-lg text-gray-400 font-light leading-relaxed">
                Khi thế giới ngủ, AI thức. <br>
                Trải nghiệm ngân hàng 24/7 ngay trên thiết bị mô phỏng.
            </p>
        </div>

        <!-- Interactive Phone Mockup -->
        <div class="z-20 animate-float order-1 md:order-2 relative">
            <div id="phone-placeholder"></div> <!-- Space holder -->
            <div id="main-phone" class="phone-mockup">
                <div class="dynamic-island"></div>
                
                <div class="status-bar">
                    <span>03:00</span>
                    <div class="flex gap-1.5">
                        <i class="fa-solid fa-signal"></i><i class="fa-solid fa-wifi"></i><i class="fa-solid fa-battery-full"></i>
                    </div>
                </div>

                <div class="phone-screen pt-14 relative" id="phone-content-wrapper">
                    
                    <!-- HOME SCREEN -->
                    <div id="home-screen" class="w-full h-full flex flex-col transition-all duration-300">
                        <div class="mb-8 mt-2 px-4 pointer-events-none">
                            <h2 class="text-6xl font-light text-white font-display text-center drop-shadow-lg">03:00</h2>
                            <p class="text-electricBlue text-center text-sm uppercase tracking-widest mt-1 mb-6 drop-shadow">Thứ Ba, 25/12</p>
                            
                            <div class="bg-white/10 backdrop-blur-md rounded-2xl p-4 flex items-center justify-between border border-white/10 shadow-lg pointer-events-auto cursor-pointer hover:bg-white/20 transition">
                                <div>
                                    <div class="text-[10px] text-gray-300 font-bold uppercase tracking-wider">Trạng thái hệ thống</div>
                                    <div class="text-sm font-bold text-green-400 flex items-center gap-2 mt-1">
                                        <div class="w-2 h-2 rounded-full bg-green-400 animate-pulse"></div> Bảo vệ 24/7
                                    </div>
                                </div>
                                <i class="fa-solid fa-shield-halved text-2xl text-white/30"></i>
                            </div>
                        </div>

                        <!-- App Grid -->
                        <div class="grid grid-cols-4 gap-y-8 gap-x-2 px-2 mb-4 relative z-50">
                            <!-- Apps 1-8 -->
                            <div class="flex flex-col items-center group cursor-pointer active:scale-90 transition-transform" onclick="openApp('app-theory-overview')">
                                <div class="app-icon bg-gradient-to-br from-indigo-500 to-blue-900 border border-indigo-400"><i class="fa-solid fa-earth-americas"></i></div><span class="app-label">Tổng quát</span>
                            </div>
                            <div class="flex flex-col items-center group cursor-pointer active:scale-90 transition-transform" onclick="openApp('app-theory-ai')">
                                <div class="app-icon bg-gradient-to-br from-blue-500 to-cyan-700 border border-blue-400"><i class="fa-solid fa-robot"></i></div><span class="app-label">AI là gì</span>
                            </div>
                            <div class="flex flex-col items-center group cursor-pointer active:scale-90 transition-transform" onclick="openApp('app-theory-genai')">
                                <div class="app-icon bg-gradient-to-br from-purple-500 to-pink-600 border border-purple-400"><i class="fa-solid fa-wand-magic-sparkles"></i></div><span class="app-label">GenAI</span>
                            </div>
                            <div class="flex flex-col items-center group cursor-pointer active:scale-90 transition-transform" onclick="openApp('app-theory-nlp')">
                                <div class="app-icon bg-gradient-to-br from-teal-400 to-emerald-700 border border-teal-400"><i class="fa-solid fa-comments"></i></div><span class="app-label">NLP</span>
                            </div>
                            <div class="flex flex-col items-center group cursor-pointer active:scale-90 transition-transform" onclick="openApp('app-theory-security')">
                                <div class="app-icon bg-gradient-to-br from-red-600 to-rose-900 border border-red-500"><i class="fa-solid fa-fingerprint"></i></div><span class="app-label">Bảo mật</span>
                            </div>
                            <div class="flex flex-col items-center group cursor-pointer active:scale-90 transition-transform" onclick="openApp('app-chat')">
                                <div class="app-icon bg-gradient-to-br from-gray-800 to-black border border-electricBlue"><i class="fa-solid fa-message text-electricBlue"></i></div><span class="app-label text-electricBlue">Chatbot</span>
                            </div>
                            <div class="flex flex-col items-center group cursor-pointer active:scale-90 transition-transform" onclick="openApp('app-youtube')">
                                <div class="app-icon bg-white text-red-600"><i class="fa-brands fa-youtube"></i></div><span class="app-label">YouTube</span>
                            </div>
                            <div class="flex flex-col items-center group cursor-pointer active:scale-90 transition-transform" onclick="openApp('app-settings')">
                                <div class="app-icon bg-gray-500"><i class="fa-solid fa-gear"></i></div><span class="app-label">Cài đặt</span>
                            </div>
                            
                            <!-- 9. GRAND FINALE (MYSTERY BUTTON) -->
                            <div class="flex flex-col items-center group cursor-pointer active:scale-90 transition-transform" onclick="startGrandFinale()">
                                <div class="app-icon bg-black border border-gray-700 shadow-[0_0_15px_rgba(255,255,255,0.2)]">
                                    <i class="fa-solid fa-power-off text-white animate-pulse"></i>
                                </div>
                                <span class="app-label"></span>
                            </div>
                        </div>

                        <!-- Dock -->
                        <div class="dock-container">
                            <div class="app-icon w-12 h-12 text-xl bg-green-500 rounded-2xl shadow-lg"><i class="fa-solid fa-phone"></i></div>
                            <div class="app-icon w-12 h-12 text-xl bg-blue-500 rounded-2xl shadow-lg"><i class="fa-brands fa-safari"></i></div>
                            <div class="app-icon w-12 h-12 text-xl bg-gray-700 rounded-2xl shadow-lg"><i class="fa-solid fa-envelope"></i></div>
                            <div class="app-icon w-12 h-12 text-xl bg-gradient-to-tr from-yellow-400 via-red-500 to-purple-500 rounded-2xl shadow-lg"><i class="fa-brands fa-instagram"></i></div>
                        </div>
                    </div>

                    <!-- ================= APPS CONTENT ================= -->
                    
                    <!-- 1. TỔNG QUÁT -->
                    <div id="app-theory-overview" class="app-view bg-gradient-to-br from-[#0f172a] to-[#1e293b] text-white">
                        <div class="p-6 pt-12 relative overflow-y-auto h-full pb-24 custom-scrollbar">
                            <div class="floating-word text-6xl text-indigo-500/10 top-10 right-[-20px] rotate-12">OVERVIEW</div>
                            <div class="text-center mb-8 relative z-10">
                                <div class="w-16 h-16 bg-indigo-500 rounded-2xl flex items-center justify-center mb-4 text-3xl mx-auto shadow-lg shadow-indigo-500/50"><i class="fa-solid fa-earth-americas"></i></div>
                                <h2 class="text-3xl slide-heading mb-1 uppercase">Bối Cảnh</h2>
                                <p class="text-xs text-indigo-300 uppercase tracking-widest">Ngân hàng số hiện đại</p>
                            </div>
                            <div class="space-y-6 relative z-10">
                                <div class="bg-white/5 border border-white/10 p-5 rounded-3xl backdrop-blur-xl">
                                    <h3 class="text-indigo-400 font-bold text-sm mb-3 uppercase tracking-wider">Xu hướng thị trường</h3>
                                    <p class="slide-content text-sm text-gray-200 mb-4">Trong kỷ nguyên số, khách hàng yêu cầu sự phục vụ tức thời (Instant Gratification). Dịch vụ ngân hàng đã chuyển dịch từ mô hình "địa điểm vật lý" sang "trải nghiệm số liền mạch" hoạt động 24/7/365.</p>
                                    <div class="grid grid-cols-2 gap-3"><div class="bg-black/30 p-3 rounded-xl text-center"><div class="text-red-400 font-bold text-xl">45p</div><div class="text-[10px] text-gray-400">Thời gian chờ (Call Center)</div></div><div class="bg-black/30 p-3 rounded-xl text-center"><div class="text-green-400 font-bold text-xl">0.5s</div><div class="text-[10px] text-gray-400">Thời gian phản hồi AI</div></div></div>
                                </div>
                                <div class="bg-indigo-900/20 border border-indigo-500/30 p-5 rounded-3xl">
                                    <div class="flex items-center gap-2 mb-3"><i class="fa-solid fa-lightbulb text-yellow-400 text-xl"></i><h3 class="text-white font-bold text-sm uppercase">Tình huống thực tế</h3></div>
                                    <p class="slide-content text-sm text-gray-300 italic border-l-2 border-indigo-500 pl-3">"Khách hàng gặp sự cố mất thẻ tín dụng tại Châu Âu lúc 3:00 sáng (giờ Việt Nam). Hệ thống tổng đài truyền thống quá tải dẫn đến việc khách hàng không thể khóa thẻ kịp thời, gây rủi ro thất thoát tài chính lớn. Giải pháp AI Banking giải quyết triệt để độ trễ này."</p>
                                </div>
                            </div>
                        </div>
                        <div class="back-btn-container"><button onclick="goHome()" class="back-btn"><i class="fa-solid fa-arrow-left"></i> Quay lại</button></div>
                    </div>

                    <!-- 2. AI LÀ GÌ -->
                    <div id="app-theory-ai" class="app-view bg-gradient-to-br from-[#020617] to-[#172554] text-white">
                        <div class="p-6 pt-12 relative overflow-y-auto h-full pb-24 custom-scrollbar">
                            <div class="floating-word text-6xl text-blue-500/10 bottom-20 left-[-20px] -rotate-12">INTELLIGENCE</div>
                            <div class="text-center mb-8 relative z-10">
                                <div class="w-16 h-16 bg-blue-600 rounded-2xl flex items-center justify-center mb-4 text-3xl mx-auto shadow-lg shadow-blue-600/50"><i class="fa-solid fa-robot"></i></div>
                                <h2 class="text-3xl slide-heading mb-1 uppercase">AI Trong Fintech</h2>
                                <p class="text-xs text-blue-300 uppercase tracking-widest">Định nghĩa & Ứng dụng</p>
                            </div>
                            <div class="space-y-6 relative z-10">
                                <div class="bg-white/5 border border-white/10 p-5 rounded-3xl backdrop-blur-xl">
                                    <h3 class="text-blue-400 font-bold text-sm mb-3 uppercase">Định nghĩa</h3>
                                    <p class="slide-content text-sm text-gray-200 mb-4">Trí tuệ nhân tạo (AI) trong ngân hàng là việc ứng dụng các thuật toán Học máy (Machine Learning) và Khoa học dữ liệu để mô phỏng khả năng nhận thức của con người nhằm giải quyết các vấn đề phức tạp.</p>
                                    <ul class="text-xs text-gray-300 space-y-2 list-disc list-inside"><li>Tự động hóa quy trình (RPA).</li><li>Phân tích dữ liệu lớn (Big Data Analytics).</li><li>Cá nhân hóa trải nghiệm người dùng.</li></ul>
                                </div>
                                <div class="bg-blue-900/20 border border-blue-500/30 p-5 rounded-3xl">
                                    <div class="flex items-center gap-2 mb-3"><i class="fa-solid fa-code-compare text-cyan-400 text-xl"></i><h3 class="text-white font-bold text-sm uppercase">So sánh hiệu quả</h3></div>
                                    <div class="space-y-3">
                                        <div class="p-3 bg-black/40 rounded-xl border-l-4 border-gray-500"><div class="text-[10px] text-gray-400 uppercase font-bold mb-1">Hệ thống Rule-Based (Cũ)</div><p class="text-xs text-gray-300">Hoạt động dựa trên kịch bản cố định. Nếu câu hỏi của khách hàng nằm ngoài bộ từ khóa, hệ thống sẽ báo lỗi hoặc yêu cầu lặp lại.</p></div>
                                        <div class="p-3 bg-black/40 rounded-xl border-l-4 border-blue-500"><div class="text-[10px] text-blue-400 uppercase font-bold mb-1">AI Chatbot (Mới)</div><p class="text-xs text-gray-300">Sử dụng Machine Learning để "học" từ lịch sử tương tác, có khả năng hiểu ngữ cảnh và đưa ra giải pháp linh hoạt ngay cả với các tình huống chưa được lập trình trước.</p></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="back-btn-container"><button onclick="goHome()" class="back-btn"><i class="fa-solid fa-arrow-left"></i> Quay lại</button></div>
                    </div>

                    <!-- 3. GEN AI -->
                    <div id="app-theory-genai" class="app-view bg-gradient-to-br from-[#2e1065] to-[#4c1d95] text-white">
                        <div class="p-6 pt-12 relative overflow-y-auto h-full pb-24 custom-scrollbar">
                            <div class="floating-word text-6xl text-purple-400/10 top-32 right-[-30px] rotate-45">CREATE</div>
                            <div class="text-center mb-8 relative z-10">
                                <div class="w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center mb-4 text-3xl mx-auto shadow-lg shadow-purple-500/50 animate-pulse"><i class="fa-solid fa-wand-magic-sparkles"></i></div>
                                <h2 class="text-3xl slide-heading mb-1 uppercase">Generative AI</h2>
                                <p class="text-xs text-purple-200 uppercase tracking-widest">Sáng tạo & Thấu cảm</p>
                            </div>
                            <div class="space-y-6 relative z-10">
                                <div class="bg-white/5 border border-white/10 p-5 rounded-3xl backdrop-blur-xl">
                                    <h3 class="text-pink-400 font-bold text-sm mb-3 uppercase">Bước tiến công nghệ</h3>
                                    <p class="slide-content text-sm text-gray-200 mb-4">Khác với AI phân tích truyền thống, <strong>Generative AI (AI Tạo sinh)</strong> có khả năng tạo ra nội dung mới (văn bản, giọng nói) giống con người. Điều này cho phép Chatbot không chỉ trả lời thông tin mà còn thể hiện sự <strong>thấu cảm (Empathy)</strong>.</p>
                                    <div class="bg-purple-900/50 p-3 rounded-xl border border-purple-400/30 text-center"><h4 class="text-pink-300 font-bold text-xs mb-1">Hyper-Personalization</h4><p class="text-xs text-gray-300">Cá nhân hóa hội thoại theo cảm xúc và lịch sử của từng khách hàng cụ thể.</p></div>
                                </div>
                                <div class="bg-purple-900/20 border border-pink-500/30 p-5 rounded-3xl">
                                    <div class="flex items-center gap-2 mb-3"><i class="fa-solid fa-comments text-pink-400 text-xl"></i><h3 class="text-white font-bold text-sm uppercase">Tình huống: Xử lý khiếu nại</h3></div>
                                    <div class="space-y-2">
                                        <p class="text-xs text-gray-400 italic">Khách hàng đang tức giận vì bị trừ phí không rõ lý do.</p>
                                        <div class="p-3 bg-black/40 rounded-lg"><p class="text-xs text-gray-500 mb-1 font-bold">Bot kịch bản cũ:</p><p class="text-xs text-gray-400">"Cú pháp không hợp lệ. Vui lòng nhập lại." (Phản hồi máy móc, gây ức chế)</p></div>
                                        <div class="p-3 bg-gradient-to-r from-purple-900/50 to-pink-900/50 rounded-lg border border-pink-500/20"><p class="text-xs text-pink-400 mb-1 font-bold">GenAI:</p><p class="text-xs text-white">"Em rất tiếc về sự bất tiện này và hiểu sự lo lắng của anh. Em đã kiểm tra và thấy đây là phí thường niên. Em có thể hỗ trợ anh thủ tục hoàn phí ngay lập tức ạ." (Thấu cảm và giải quyết vấn đề)</p></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="back-btn-container"><button onclick="goHome()" class="back-btn"><i class="fa-solid fa-arrow-left"></i> Quay lại</button></div>
                    </div>

                    <!-- 4. NLP -->
                    <div id="app-theory-nlp" class="app-view bg-gradient-to-br from-[#042f2e] to-[#115e59] text-white">
                        <div class="p-6 pt-12 relative overflow-y-auto h-full pb-24 custom-scrollbar">
                            <div class="floating-word text-6xl text-teal-400/10 top-10 left-[-10px]">LANGUAGE</div>
                            <div class="text-center mb-8 relative z-10">
                                <div class="w-16 h-16 bg-teal-600 rounded-2xl flex items-center justify-center mb-4 text-3xl mx-auto shadow-lg shadow-teal-600/50"><i class="fa-solid fa-comments"></i></div>
                                <h2 class="text-3xl slide-heading mb-1 uppercase">NLP Core</h2>
                                <p class="text-xs text-teal-200 uppercase tracking-widest">Xử lý ngôn ngữ tự nhiên</p>
                            </div>
                            <div class="space-y-6 relative z-10">
                                <div class="bg-white/5 border border-white/10 p-5 rounded-3xl backdrop-blur-xl">
                                    <h3 class="text-teal-300 font-bold text-sm mb-3 uppercase">Cơ chế hoạt động</h3>
                                    <p class="slide-content text-sm text-gray-200 mb-4">NLP (Natural Language Processing) là công nghệ giúp máy tính hiểu, diễn giải và phản hồi ngôn ngữ con người. Trong Banking AI, NLP thực hiện hai nhiệm vụ chính:</p>
                                    <div class="grid grid-cols-1 gap-3">
                                        <div class="bg-teal-900/40 p-3 rounded-xl border-l-4 border-teal-400"><span class="text-teal-300 font-bold text-xs block">INTENT RECOGNITION (Nhận diện ý định)</span><span class="text-[10px] text-gray-300">Xác định mục đích của khách hàng (VD: Chuyển tiền, Khóa thẻ).</span></div>
                                        <div class="bg-teal-900/40 p-3 rounded-xl border-l-4 border-yellow-400"><span class="text-yellow-300 font-bold text-xs block">ENTITY EXTRACTION (Trích xuất thực thể)</span><span class="text-[10px] text-gray-300">Lấy các thông tin chi tiết (VD: Số tiền, Tên người nhận, Thời gian).</span></div>
                                    </div>
                                </div>
                                <div class="bg-teal-900/20 border border-teal-500/30 p-5 rounded-3xl">
                                    <div class="flex items-center gap-2 mb-3"><i class="fa-solid fa-microchip text-teal-400 text-xl"></i><h3 class="text-white font-bold text-sm uppercase">Ví dụ phân tích kỹ thuật</h3></div>
                                    <div class="bg-black/40 p-4 rounded-xl font-mono text-xs">
                                        <p class="text-gray-400 mb-2">// User Input:</p><p class="text-white mb-4">"Chuyển 500k cho Mẹ ngay nhé"</p>
                                        <div class="border-t border-gray-700 pt-2 space-y-1">
                                            <p class="flex justify-between"><span class="text-teal-400">Intent:</span> <span class="text-white">TRANSFER_FUNDS</span></p>
                                            <p class="flex justify-between"><span class="text-yellow-400">Entity (Amount):</span> <span class="text-white">500,000 VND</span></p>
                                            <p class="flex justify-between"><span class="text-yellow-400">Entity (Receiver):</span> <span class="text-white">Contact("Mẹ")</span></p>
                                            <p class="flex justify-between"><span class="text-yellow-400">Entity (Time):</span> <span class="text-white">IMMEDIATE</span></p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="back-btn-container"><button onclick="goHome()" class="back-btn"><i class="fa-solid fa-arrow-left"></i> Quay lại</button></div>
                    </div>

                    <!-- 5. BẢO MẬT -->
                    <div id="app-theory-security" class="app-view bg-[#0a0a0a] text-white">
                        <div class="p-6 pt-12 relative overflow-y-auto h-full pb-24 custom-scrollbar">
                            <div class="text-center mb-8 relative z-10">
                                <div class="w-16 h-16 bg-red-700 text-white rounded-2xl flex items-center justify-center mb-4 text-3xl mx-auto shadow-lg shadow-red-700/50"><i class="fa-solid fa-shield-halved"></i></div>
                                <h2 class="text-3xl slide-heading mb-1 uppercase">Bảo Mật AI</h2>
                                <p class="text-xs text-red-400 uppercase tracking-widest">Zero Trust & Biometrics</p>
                            </div>
                            <div class="space-y-6 relative z-10">
                                <div class="bg-black/80 border border-red-900/50 p-5 rounded-3xl shadow-2xl">
                                    <h3 class="text-red-500 font-bold text-sm mb-3 uppercase">Kiến trúc Zero Trust</h3>
                                    <p class="slide-content text-sm text-gray-300 mb-4">Mô hình bảo mật "Không tin bất kỳ ai, luôn luôn xác thực". Ngoài mật khẩu truyền thống, AI phân tích <strong>Sinh trắc học hành vi (Behavioral Biometrics)</strong> như lực gõ phím, góc cầm điện thoại, vị trí địa lý để xác thực danh tính liên tục.</p>
                                    <div class="flex items-center gap-3 bg-red-900/20 p-3 rounded-xl"><i class="fa-solid fa-fingerprint text-red-500 text-2xl"></i><div class="text-xs text-gray-300">Trust Score (Điểm tín nhiệm) được cập nhật theo thời gian thực (Real-time).</div></div>
                                </div>
                                <div class="bg-red-900/10 border border-red-600/30 p-5 rounded-3xl">
                                    <div class="flex items-center gap-2 mb-3"><i class="fa-solid fa-mask text-red-500 text-xl"></i><h3 class="text-white font-bold text-sm uppercase">Tình huống: Deepfake Voice</h3></div>
                                    <p class="slide-content text-sm text-gray-300 mb-3">Tội phạm mạng sử dụng AI để giả mạo giọng nói của chủ tài khoản nhằm vượt qua xác thực qua điện thoại.</p>
                                    <div class="bg-black p-3 rounded-xl border border-gray-800">
                                        <div class="flex justify-between text-xs mb-1"><span class="text-gray-400">Phân tích phổ âm thanh:</span><span class="text-red-500 font-bold">PHÁT HIỆN GIẢ MẠO</span></div>
                                        <div class="w-full bg-gray-800 h-2 rounded-full overflow-hidden"><div class="bg-red-600 h-full w-[95%]"></div></div>
                                        <p class="text-[10px] text-gray-500 mt-2">*Hệ thống phát hiện sự thiếu hụt các vi chấn (micro-tremors) tự nhiên của dây thanh quản con người trong giọng nói tổng hợp.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="back-btn-container"><button onclick="goHome()" class="back-btn"><i class="fa-solid fa-arrow-left"></i> Quay lại</button></div>
                    </div>

                    <!-- 7. YOUTUBE APP -->
                    <div id="app-youtube" class="app-view bg-[#0f0f0f] text-white">
                        <div class="flex justify-between items-center p-4 pt-16 border-b border-gray-800 bg-[#0f0f0f] relative z-20">
                            <div class="flex items-center gap-1"><i class="fa-brands fa-youtube text-red-600 text-2xl"></i><span class="font-bold font-display tracking-tighter">Premium</span></div>
                            <div class="flex gap-4 text-lg"><i class="fa-solid fa-magnifying-glass"></i><div class="w-6 h-6 bg-purple-600 rounded-full text-[10px] flex items-center justify-center font-bold">H</div></div>
                        </div>
                        <div class="w-full aspect-video bg-black relative flex items-center justify-center group z-30" style="pointer-events: auto;">
                            <iframe class="w-full h-full" src="https://www.youtube.com/embed/FqnhH51Lk-k?autoplay=0&controls=1&modestbranding=1&playsinline=1&rel=0&enablejsapi=1" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen style="pointer-events: auto;"></iframe>
                        </div>
                        <div class="p-4 flex-1 overflow-y-auto custom-scrollbar pb-24 relative z-10">
                            <h3 class="font-semibold text-sm line-clamp-2 mb-2">AI Banking Revolution - The Future is Now</h3>
                            <div class="text-xs text-gray-400 mb-4">500K views • 1 day ago</div>
                             <div class="flex gap-3 mb-3">
                                <div class="w-28 h-16 bg-gray-800 rounded flex-shrink-0 relative overflow-hidden"><div class="absolute inset-0 bg-red-600/10 flex items-center justify-center text-gray-600 text-xs">Next Video</div></div>
                                <div><h4 class="text-xs font-semibold line-clamp-2">How Chatbots Work?</h4><p class="text-[10px] text-gray-500 mt-1">Tech Explain</p></div>
                            </div>
                        </div>
                        <div class="back-btn-container"><button onclick="goHome()" class="back-btn"><i class="fa-solid fa-arrow-left"></i> Home</button></div>
                    </div>
                    
                    <!-- 6. APP: CHATBOT DEMO -->
                     <div id="app-chat" class="app-view bg-gray-900 flex flex-col">
                        <div class="bg-gray-800 p-4 pt-16 flex items-center gap-3 border-b border-gray-700 relative z-50 shadow-md">
                            <div class="w-9 h-9 rounded-full bg-gradient-to-br from-electricBlue to-cyberPurple flex items-center justify-center text-xs font-bold text-white shadow-lg">AI</div>
                            <div><div class="text-sm font-bold text-white">Guardian Bot</div><div class="text-[10px] text-electricBlue flex items-center gap-1"><span class="w-1.5 h-1.5 rounded-full bg-electricBlue animate-pulse"></span> Trực tuyến</div></div>
                        </div>
                         <div id="chat-body" class="p-4 space-y-4 flex-1 overflow-y-auto bg-[#0a1120] text-xs pb-24"></div>
                         <div class="absolute bottom-20 w-full bg-gray-800 p-4 border-t border-gray-700 z-50">
                            <div class="flex gap-2 justify-center" id="chat-options">
                                <button onclick="startDemo()" class="bg-electricBlue text-deepNavy font-bold py-3 px-6 rounded-full text-xs hover:bg-white transition w-full shadow-lg">Bắt đầu tình huống: Gian lận thẻ</button>
                            </div>
                        </div>
                        <div class="back-btn-container"><button onclick="goHome()" class="back-btn"><i class="fa-solid fa-arrow-left"></i> Home</button></div>
                     </div>

                    <!-- 8. APP: SETTINGS -->
                    <div id="app-settings" class="app-view bg-[#1c1c1e] text-white flex flex-col">
                        <div class="p-6 pt-16 flex items-center gap-4 bg-[#1c1c1e] border-b border-gray-800 sticky top-0 z-50">
                            <h2 class="text-xl font-bold flex-1 text-center">Cài đặt</h2>
                        </div>
                        <div class="p-4 space-y-6 overflow-y-auto custom-scrollbar pb-24">
                            <div class="flex items-center gap-4 bg-[#2c2c2e] p-4 rounded-xl">
                                <div class="w-14 h-14 bg-gray-500 rounded-full flex items-center justify-center text-xl font-bold text-white">HN</div>
                                <div><div class="font-bold text-lg">Huy Nguyen</div><div class="text-xs text-gray-400">Apple ID, iCloud+ & Media</div></div>
                            </div>
                            <div class="bg-[#2c2c2e] rounded-xl overflow-hidden text-sm">
                                <div class="p-3 flex justify-between items-center cursor-pointer hover:bg-gray-600 transition" onclick="toggleSecurity()" id="ai-setting-row">
                                    <div class="flex items-center gap-3"><div class="w-7 h-7 rounded bg-gradient-to-br from-electricBlue to-cyberPurple flex items-center justify-center shadow-lg"><i class="fa-solid fa-robot text-white text-[12px]"></i></div><span class="font-bold">Guardian AI</span></div>
                                    <div class="flex items-center gap-2"><span class="text-electricBlue text-xs transition-colors font-bold" id="ai-status-text">Đang bảo vệ</span><div class="w-11 h-7 bg-green-500 rounded-full relative transition-colors duration-300 shadow-inner" id="ai-toggle-bg"><div class="absolute right-1 top-1 w-5 h-5 bg-white rounded-full shadow-md transition-all duration-300" id="ai-toggle-circle"></div></div></div>
                                </div>
                            </div>
                        </div>
                        <div class="back-btn-container"><button onclick="goHome()" class="back-btn"><i class="fa-solid fa-arrow-left"></i> Quay lại</button></div>
                    </div>

                    <!-- HOME INDICATOR -->
                    <div class="home-indicator-area" onclick="goHome()"><div class="home-indicator"></div></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <section class="py-20 text-center"><p class="text-gray-500">Cuộn xuống để xem chi tiết</p></section>

    <script>
        // --- 1. Custom Cursor ---
        const cursorDot = document.getElementById("cursor-dot");
        const cursorOutline = document.getElementById("cursor-outline");
        window.addEventListener("mousemove", (e) => {
            const posX = e.clientX; const posY = e.clientY;
            cursorDot.style.left = `${posX}px`; cursorDot.style.top = `${posY}px`;
            cursorOutline.animate({ left: `${posX}px`, top: `${posY}px` }, { duration: 500, fill: "forwards" });
        });

        // --- 2. Three.js Background ---
        const initThreeJS = () => {
            const container = document.getElementById('canvas-container');
            const scene = new THREE.Scene(); scene.fog = new THREE.FogExp2(0x020c1b, 0.002);
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000); camera.position.z = 5;
            const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight); renderer.setPixelRatio(window.devicePixelRatio);
            container.appendChild(renderer.domElement);
            
            const particlesGeometry = new THREE.BufferGeometry();
            const particlesCount = 1500;
            const posArray = new Float32Array(particlesCount * 3);
            for(let i = 0; i < particlesCount * 3; i++) { posArray[i] = (Math.random() - 0.5) * 10; }
            particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
            const material = new THREE.PointsMaterial({ size: 0.02, color: 0x00f3ff, transparent: true, opacity: 0.8 });
            const particlesMesh = new THREE.Points(particlesGeometry, material);
            scene.add(particlesMesh);

            const animate = () => {
                particlesMesh.rotation.y += 0.001;
                particlesMesh.rotation.x += 0.0005;
                renderer.render(scene, camera);
                requestAnimationFrame(animate);
            };
            animate();
            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            });
        };

        // --- 3. GRAND FINALE LOGIC (2-STEP ANIMATION with DOM Movement) ---
        let finaleAnimReq;
        
        function startGrandFinale() {
            const phone = document.getElementById('main-phone');
            const placeholder = document.getElementById('phone-placeholder');
            const overlay = document.getElementById('grand-finale-overlay');
            const text = document.getElementById('finale-text');
            const phoneScreen = document.getElementById('phone-content-wrapper'); // Inner screen
            const dynamicIsland = phone.querySelector('.dynamic-island');
            const statusBar = phone.querySelector('.status-bar');
            const homeIndicator = phone.querySelector('.home-indicator-area');

            // 1. Capture current position
            const rect = phone.getBoundingClientRect();
            
            // 2. Setup placeholder to prevent layout shift
            placeholder.style.display = 'block';
            
            // 3. Move phone to body to escape container clipping
            document.body.appendChild(phone);
            
            // 4. Set fixed position at current coordinates immediately
            phone.style.position = 'fixed';
            phone.style.top = rect.top + 'px';
            phone.style.left = rect.left + 'px';
            phone.style.margin = '0';
            
            // Force Reflow
            void phone.offsetWidth;

            // 5. Add Transition class for smooth movement
            phone.classList.add('finale-mode-setup');

            // 6. STEP 1: MOVE TO CENTER & ROTATE
            requestAnimationFrame(() => {
                phone.classList.add('finale-mode-center');
                // Hide UI elements immediately
                dynamicIsland.style.opacity = '0';
                statusBar.style.opacity = '0';
                homeIndicator.style.opacity = '0';
            });

            // 7. STEP 2: EXPAND (After 1s - slightly faster transition)
            setTimeout(() => {
                phone.classList.add('finale-mode-expand');
                // Fade out screen content to black
                phoneScreen.classList.add('finale-fade-out');
            }, 1000);

            // 8. STEP 3: EXPLOSION (Overlapping with expansion, around 2.5s total time)
            setTimeout(() => {
                overlay.classList.add('show');
                startChaoticParticles();
                setTimeout(() => { text.classList.add('show'); }, 300);
            }, 2500);
        }

        function resetFinale() {
            location.reload(); // Simple reload to reset everything cleanly
        }

        function startChaoticParticles() {
            const canvas = document.getElementById('finale-canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            const particles = [];
            for(let i=0; i<150; i++) {
                particles.push({
                    x: canvas.width/2,
                    y: canvas.height/2,
                    vx: (Math.random() - 0.5) * 20, 
                    vy: (Math.random() - 0.5) * 20,
                    size: Math.random() * 3,
                    color: Math.random() > 0.5 ? '#00f3ff' : '#bc13fe'
                });
            }

            function animate() {
                ctx.fillStyle = 'rgba(0, 0, 0, 0.1)'; 
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                particles.forEach(p => {
                    p.x += p.vx;
                    p.y += p.vy;
                    if(p.x < 0 || p.x > canvas.width) p.vx *= -1;
                    if(p.y < 0 || p.y > canvas.height) p.vy *= -1;

                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.size, 0, Math.PI*2);
                    ctx.fillStyle = p.color;
                    ctx.fill();
                });
                
                for(let i=0; i<particles.length; i++) {
                    for(let j=i+1; j<particles.length; j++) {
                        const dx = particles[i].x - particles[j].x;
                        const dy = particles[i].y - particles[j].y;
                        const dist = Math.sqrt(dx*dx + dy*dy);
                        if(dist < 100) {
                            ctx.beginPath();
                            ctx.strokeStyle = `rgba(255, 255, 255, ${1 - dist/100})`;
                            ctx.lineWidth = 0.5;
                            ctx.moveTo(particles[i].x, particles[i].y);
                            ctx.lineTo(particles[j].x, particles[j].y);
                            ctx.stroke();
                        }
                    }
                }
                finaleAnimReq = requestAnimationFrame(animate);
            }
            animate();
        }

        // --- 4. Chat Logic ---
        function startDemo() {
            const chatBody = document.getElementById('chat-body');
            const chatOptions = document.getElementById('chat-options');
            chatBody.innerHTML = ''; chatOptions.innerHTML = '';
            
            const addMsg = (text, isBot = true, delay = 0) => {
                setTimeout(() => {
                    const div = document.createElement('div');
                    div.className = `flex ${isBot ? 'justify-start' : 'justify-end'} mb-3 animate-pulse`;
                    div.style.animation = 'none'; div.style.animation = 'fadeIn 0.3s ease-out';
                    const bubble = document.createElement('div');
                    bubble.className = isBot ? 'bg-gray-700 text-gray-200 p-3 rounded-2xl rounded-tl-none max-w-[80%]' : 'bg-electricBlue text-deepNavy font-bold p-3 rounded-2xl rounded-tr-none max-w-[80%]';
                    bubble.innerText = text;
                    div.appendChild(bubble); chatBody.appendChild(div); chatBody.scrollTop = chatBody.scrollHeight;
                }, delay);
            };

            addMsg("⚠️ Cảnh báo: Giao dịch 50$ tại Berlin lúc 2:00 AM.", true, 500);
            addMsg("Có phải là anh không, Huy?", true, 1500);
            setTimeout(() => {
                const div = document.createElement('div'); div.className = 'flex gap-2 justify-center mt-4';
                div.innerHTML = `<button id="btn-no" class="bg-red-500/20 text-red-400 border border-red-500 px-4 py-2 rounded-lg text-xs">Không phải!</button>`;
                chatBody.appendChild(div); chatBody.scrollTop = chatBody.scrollHeight;
                document.getElementById('btn-no').onclick = () => {
                    div.remove(); addMsg("Không! Đó không phải tôi!", false, 0);
                    setTimeout(() => {
                        addMsg("Đã hiểu. Đang khóa thẻ...", true, 500);
                        addMsg("🔒 Thẻ ***4829 đã khóa thành công.", true, 1500);
                        setTimeout(() => {
                             chatOptions.innerHTML = `<button onclick="startDemo()" class="text-gray-400 text-xs hover:text-white underline">Thử lại</button>`;
                        }, 2500);
                    }, 500);
                };
            }, 2000);
        }

        // --- 5. Settings Toggle ---
        let isSecurityOn = true;
        function toggleSecurity() {
            isSecurityOn = !isSecurityOn;
            const statusText = document.getElementById('ai-status-text');
            const toggleBg = document.getElementById('ai-toggle-bg');
            const toggleCircle = document.getElementById('ai-toggle-circle');
            if(isSecurityOn) {
                statusText.innerText = "Đang bảo vệ"; statusText.className = "text-electricBlue text-xs transition-colors font-bold";
                toggleBg.className = "w-11 h-7 bg-green-500 rounded-full relative transition-colors duration-300 shadow-inner";
                toggleCircle.className = "absolute right-1 top-1 w-5 h-5 bg-white rounded-full shadow-md transition-all duration-300";
            } else {
                statusText.innerText = "Đã tắt"; statusText.className = "text-red-500 text-xs transition-colors font-bold";
                toggleBg.className = "w-11 h-7 bg-gray-600 rounded-full relative transition-colors duration-300 shadow-inner";
                toggleCircle.className = "absolute left-1 top-1 w-5 h-5 bg-white rounded-full shadow-md transition-all duration-300";
            }
        }

        // --- 6. Navigation ---
        function openApp(appId) {
            document.querySelectorAll('.app-view').forEach(app => app.classList.remove('active'));
            const app = document.getElementById(appId);
            if(app) {
                app.classList.add('active');
            }
        }
        function goHome() {
            document.querySelectorAll('.app-view').forEach(app => app.classList.remove('active'));
        }

        // --- Init ---
        window.onload = function() {
            initThreeJS();
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('active'); });
            }, { threshold: 0.1 });
            document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
        };
    </script>
</body>
</html>
